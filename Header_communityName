(function () {

  function getParam(name) {
    const url = new URL(window.location.href);
    return decodeURIComponent(url.searchParams.get(name) || "");
  }

  function normalize(text) {
    return text.replace(/\u00A0/g, " ").trim(); // מנקה nbsp
  }

  function replaceHeader() {

    const community = getParam("community");
    if (!community) return;

    document.querySelectorAll("span").forEach(el => {

      const t = normalize(el.innerText);

      if (t.includes("רישום לקהילת")) {
        el.innerText = `רישום לקהילת ${community}`;
      }

    });
  }

  const interval = setInterval(() => {
    replaceHeader();

    if (document.body.innerText.includes(getParam("community"))) {
      clearInterval(interval);
    }
  }, 300);

})();
