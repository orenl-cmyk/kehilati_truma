(function () {

  function getParam(name) {
    return new URL(window.location.href).searchParams.get(name) || "";
  }

  const community = getParam("community");
  if (!community) return;

  function injectHeader() {

    const header = document.querySelector(".pre-content");
    if (!header) return;

    if (header.innerHTML.includes("community-header")) return;

    const titleHTML = `
      <div id="community-header"
        style="
          text-align:center;
          font-weight:bold;
          color:#1f5fa8;
          margin:6px 0;
          padding:0 8px;
          line-height:1.2;
          font-size:clamp(14px,5vw,28px);
          word-break:break-word;
        ">
        רישום לקהילת ${community}
      </div>
    `;

    // מחליף את ה-&nbsp; האחרון בכותרת
    header.innerHTML = header.innerHTML.replace(
      /<div style="text-align: center;">&nbsp;<\/div>\s*$/,
      titleHTML
    );
  }

  const interval = setInterval(() => {
    injectHeader();

    if (document.getElementById("community-header")) {
      clearInterval(interval);
    }
  }, 300);

})();
