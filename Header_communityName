(function () {

  function getParam(name) {
    const url = new URL(window.location.href);
    return url.searchParams.get(name);
  }

  function tryInject() {

    const community = getParam("community");
    if (!community) return;

    const img = document.querySelector("img");
    if (!img || document.getElementById("community-header")) return;

    const header = document.createElement("div");
    header.id = "community-header";
    header.style.textAlign = "center";
    header.style.fontSize = "28px";
    header.style.fontWeight = "bold";
    header.style.marginTop = "10px";
    header.innerText = `רישום לקהילת ${community}`;

    img.parentElement.appendChild(header);
  }

  // מנסים כל 300ms עד שאוריגמי סיים לרנדר
  const interval = setInterval(() => {
    tryInject();

    if (document.getElementById("community-header")) {
      clearInterval(interval);
    }
  }, 300);

})();
