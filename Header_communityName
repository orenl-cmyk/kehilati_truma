(function () {

  function getParam(name) {
    const url = new URL(window.location.href);
    const v = url.searchParams.get(name);
    return v ? decodeURIComponent(v) : "";
  }

  const community = getParam("community");
  if (!community) return;

  const watcher = setInterval(() => {

    const frame = document.querySelector("iframe");
    if (!frame || !frame.contentDocument) return;

    const doc = frame.contentDocument;
    const container = doc.querySelector(".pre-content");

    if (!container) return;

    // לא להוסיף פעמיים
    if (doc.getElementById("communityTitle")) {
      clearInterval(watcher);
      return;
    }

    const title = doc.createElement("div");
    title.id = "communityTitle";
    title.style.textAlign = "center";
    title.style.fontSize = "18pt";
    title.style.fontWeight = "bold";
    title.style.marginTop = "10px";
    title.innerText = `רישום לקהילת ${community}`;

    container.appendChild(title);

    clearInterval(watcher);

  }, 300);

})();
