(function () {

  const community =
    new URL(window.location.href).searchParams.get("community") || "";

  if (!community) return;

  function run(doc) {

    const header = doc.querySelector(".pre-content");
    if (!header) return false;

    if (doc.getElementById("community-title")) return true;

    const title = doc.createElement("div");
    title.id = "community-title";
    title.innerText = "רישום לקהילת " + community;

    title.style.textAlign = "center";
    title.style.fontWeight = "bold";
    title.style.fontSize = "20px";
    title.style.margin = "10px 0";

    header.appendChild(title);

    return true;
  }

  const interval = setInterval(() => {

    // נסיון 1 — אם אנחנו כבר בתוך iframe
    if (run(document)) {
      clearInterval(interval);
      return;
    }

    // נסיון 2 — אם אנחנו מחוץ ל iframe
    const iframe = document.querySelector("#iframe_div iframe");
    if (iframe && iframe.contentDocument) {
      if (run(iframe.contentDocument)) {
        clearInterval(interval);
      }
    }

  }, 200);

})();
