(function () {

  const community =
    new URL(window.location.href).searchParams.get("community") || "";

  if (!community) return;

  // ğŸ› ×©×œ×™×˜×” ×‘×’×•×“×œ ×¤×•× ×˜
  const FONT_MIN = 12; // ××•×‘×™×™×œ
  const FONT_MAX = 20; // ×“×¡×§×˜×•×¤

  function rewrite(header) {

    const img = header.querySelector("img");
    if (!img) return;

    header.innerHTML = `
      <div style="
        position:relative;
        width:100%;
        overflow:hidden;
      ">
        ${img.outerHTML}

        <div id="community-header" style="
          position:absolute;
          bottom:8%;
          left:50%;
          transform:translateX(-50%);
          text-align:center;
          font-weight:bold;
          color:white;
          padding:0 12px;
          line-height:1.2;
          text-shadow:0 2px 6px rgba(0,0,0,0.6);
          width:90%;
          word-break:break-word;
          font-size:clamp(${FONT_MIN}px, 5vw, ${FONT_MAX}px);
        ">
          ×¨×™×©×•× ×œ×§×”×™×œ×ª ${community}
        </div>
      </div>
    `;
  }

  function attachObserver() {

    const header = document.querySelector(".pre-content");
    if (!header) {
      requestAnimationFrame(attachObserver);
      return;
    }

    rewrite(header);

    const obs = new MutationObserver(() => rewrite(header));
    obs.observe(header, { childList: true });

  }

  attachObserver();

})();
